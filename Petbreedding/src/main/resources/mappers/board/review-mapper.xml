<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="Review">
	<resultMap type="Review" id="ReviewMap">
		<id column="REV_NUM" property="revNum"/>
		<result column="BP_ID" property="bpId"/>
		<result column="CL_NUM" property="clNum"/>
		<result column="CL_NICKNAME" property="clNickName"/>
		<result column="REV_CONT" property="revCont"/>
		<result column="REV_IMG" property="revImg"/>
		<result column="REV_DATE" property="revDate"/>
		<result column="REV_VAL" property="revVal"/>
		<result column="REV_VIEW" property="revView"/>
	</resultMap>
	
	<select id="reviewSelectList" parameterType="Review" resultMap="ReviewMap">
		<![CDATA[
			SELECT r.REV_NUM, r.BP_ID, CL_NUM, r.REV_CONT, r.REV_IMG, r.REV_DATE, r.REV_VAL, r.REV_VIEW, c.CL_NICKNAME
			FROM REVIEW r JOIN CLIENT c
			USING (CL_NUM)
		 ]]>
	</select>
	
	<insert id="insertReview" parameterType="Review">
		<![CDATA[
			INSERT INTO REVIEW VALUES(
			SEQ_REVIEW.NEXTVAL, #{bpId},
			#{clNum}, #{clNickName}, #{revCont}, #{revImg},
			TO_CHAR(SYSDATE, 'YYYYMMDD'), #{revVal}, #{revView}
			)
		]]>
 	</insert>
</mapper>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="Review">
	<resultMap type="Review" id="ReviewMap">
		<id column="REV_NUM" property="revNum"/>
		<result column="HAR_NUM" property="harNum"/>
		<result column="HOS_NUM" property="hosNum"/>
		<result column="CL_NUM" property="clNum"/>
		<result column="CL_NICKNAME" property="clNickName"/>
		<result column="REV_CONT" property="revCont"/>
		<result column="REV_IMG" property="revImg"/>
		<result column="REV_DATE" property="revDate"/>
		<result column="REV_VAL" property="revVal"/>
	</resultMap>
	
	<!-- TODO HAR_NUM에 파라미터로 가져온 미용실 넘버 넣어줘야함 -->
	<select id="reviewSelectList" parameterType="Review" resultMap="ReviewMap">
		<![CDATA[
			SELECT * FROM REVIEW WHERE BP_ID = #{BP_ID}
		 ]]>
	</select>
	
	<insert id="insertReview" parameterType="Review">
		<![CDATA[
			INSERT INTO REVIEW VALUES(
			SEQ_REVIEW.NEXTVAL, #{harNum}, #{hosNum},
			#{clNum}, #{clNickName}, #{revCont}, #{revImg},
			TO_CHAR(SYSDATE, 'YYYYMMDD'), #{revVal}
			)
		]]>
 	</insert>
</mapper>